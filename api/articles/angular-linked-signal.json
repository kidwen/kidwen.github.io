{"title":"Angular linkedSignal()","uid":"374a67da1401504fdc674bb6037a7b30","slug":"angular-linked-signal","date":"2025-07-03T07:16:16.218Z","updated":"2025-07-10T07:19:02.319Z","comments":true,"path":"api/articles/angular-linked-signal.json","keywords":null,"cover":"https://img.kidwen.top/file/AgACAgUAAyEGAASHUuUOAAM6aGZI5J5sPb08-Fay3kk_hWBxMjYAAkTHMRsn2DBXuesp_uBTHlwBAAMCAAN4AAM2BA.png","content":"<p>随着Angular 19发布，Angular添加了一些新的功能。本文主要介绍Angular linked signal的基础用法和 computed 的区别，以及什么时候为什么要使用 Angular linked signal。</p>\n<h2 id=\"Angular-Linked-Signal-是什么？\"><a href=\"#Angular-Linked-Signal-是什么？\" class=\"headerlink\" title=\"Angular Linked Signal 是什么？\"></a>Angular Linked Signal 是什么？</h2><p>简单来说就是<code>可写入并关联一个或多个其他signal</code>的signal。是不是感觉和<code>computed</code>很像🤣。</p>\n<h2 id=\"linkedSignal-关键词\"><a href=\"#linkedSignal-关键词\" class=\"headerlink\" title=\"linkedSignal 关键词\"></a>linkedSignal 关键词</h2><ul>\n<li>可写入：可以使用<code>set</code>和<code>update</code>直接更新值。</li>\n<li>响应式：和<code>computed</code>一样，依赖一个或者多个signal来变化</li>\n</ul>\n<h2 id=\"如何创建linkedSignal？\"><a href=\"#如何创建linkedSignal？\" class=\"headerlink\" title=\"如何创建linkedSignal？\"></a>如何创建linkedSignal？</h2><p>先看一个简略代码如下：</p>\n<div class=\"language-typescript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">typescript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> quantity </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #82AAFF\">linkedSignal</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #82AAFF\">source</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">()</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> (</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F07178\">courseCode</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #82AAFF\">selectedCourse</span><span style=\"color: #EEFFFF\">() </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #82AAFF\">computation</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">(&#123;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #EEFFFF; font-style: italic\">courseCode</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#125;,</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #EEFFFF; font-style: italic\">previous</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">course</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #EEFFFF\">courses</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">find</span><span style=\"color: #F07178\">(</span><span style=\"color: #EEFFFF; font-style: italic\">c</span><span style=\"color: #F07178\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">c</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #EEFFFF\">code</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">===</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">courseCode</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">course</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">?</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">course</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #EEFFFF\">defaultQuantity</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">previous</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">??</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">quantity</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">set</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">quantity</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">update</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">current</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> current </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span></code></pre></div><p>关键词：</p>\n<ul>\n<li>source：指定linkedSignal关联的signal。</li>\n<li>computed：当关联的signal发生变化时执行的逻辑。</li>\n</ul>\n<p>上述代码逻辑：</p>\n<ul>\n<li>指定linkedSignal关联的signal。</li>\n<li>每次source中的关联的signal发生变化时触发computed。</li>\n<li>computed接收关联的signal值和之前linkedSignal值。</li>\n<li>返回新的值给linkedSignal。</li>\n<li>通过set和update更新linkedSignal的值。</li>\n</ul>\n<h2 id=\"什么时候使用linkedSignal？\"><a href=\"#什么时候使用linkedSignal？\" class=\"headerlink\" title=\"什么时候使用linkedSignal？\"></a>什么时候使用linkedSignal？</h2><h3 id=\"让我们从一个实际的例子出发🚀\"><a href=\"#让我们从一个实际的例子出发🚀\" class=\"headerlink\" title=\"让我们从一个实际的例子出发🚀\"></a>让我们从一个实际的例子出发🚀</h3><ul>\n<li>首先定义一个购物车，用户可以选择商品和改变数量。</li>\n<li>每个商品都有一个默认的数量。</li>\n<li>每次用户改变选中的商品都要改变对应的默认数量。</li>\n</ul>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">div</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">demo-container</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">h1</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #EEFFFF\">Shopping Cart</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">h1</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">div</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">form-control</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">label</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #EEFFFF\">Select Course</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">label</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">select</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">[value]</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">selectedCourse()</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #C792EA\">(change)</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">onCourseSelected(course.value)</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">#course</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      @for (course of courses; track course.code) &#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">option</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">[value]</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">course.code</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">            </span><span style=\"color: #545454; font-style: italic\">&#123;&#123;course.title&#125;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">option</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      &#125;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">select</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">div</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">div</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">form-control</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">label</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #EEFFFF\">Quantity</span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">label</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">input</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">type</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">number</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">       </span><span style=\"color: #C792EA\">[value]</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">quantity()</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">       </span><span style=\"color: #C792EA\">(change)</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">onQuantityChanged(input.value)</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">       </span><span style=\"color: #C792EA\">#input</span><span style=\"color: #89DDFF\">/&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">div</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">div</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">form-actions</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\">button</span><span style=\"color: #89DDFF\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">btn</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">            </span><span style=\"color: #C792EA\">(click)</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">onArticleAdded()</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      Add To Cart</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">button</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">div</span><span style=\"color: #89DDFF\">&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">div</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><p>上面代码的大概含义为</p>\n<ul>\n<li>代码中的变量均为signal。</li>\n<li>有一个下拉课程数组，用户可以选择并添加到购物车。</li>\n<li>有一个输入框对应选中课程的数量。</li>\n<li>当用户改变选择的课程，输入框的值变为选中课程的默认数量</li>\n</ul>\n<p>关键部分为数量字段，当改变选中的商品对应的数量要改变，同时输入框也可以改变数量。所以这个数量即是响应式的又是可写的。</p>\n<h3 id=\"如果没有linkedSignal我们应该怎么实现上面的逻辑🤔\"><a href=\"#如果没有linkedSignal我们应该怎么实现上面的逻辑🤔\" class=\"headerlink\" title=\"如果没有linkedSignal我们应该怎么实现上面的逻辑🤔\"></a>如果没有linkedSignal我们应该怎么实现上面的逻辑🤔</h3><p>因为数量要跟着选中的商品变化，可以考虑computed。</p>\n<p>但是输入框又可以改变数量，所以只能使用effect来更新数量。</p>\n<div class=\"language-typescript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">typescript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">effect</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #C792EA\">const</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">selectedCourse</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #82AAFF\">selectedCourse</span><span style=\"color: #F07178\">()</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #EEFFFF\">quantity</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">set</span><span style=\"color: #F07178\">(</span><span style=\"color: #EEFFFF\">courses</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">find</span><span style=\"color: #F07178\">(</span><span style=\"color: #EEFFFF; font-style: italic\">c</span><span style=\"color: #F07178\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">c</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #EEFFFF\">code</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">===</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">selectedCourse</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">?.</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">defaultQuantity</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">??</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span></code></pre></div><h3 id=\"为什么不使用effect\"><a href=\"#为什么不使用effect\" class=\"headerlink\" title=\"为什么不使用effect\"></a>为什么不使用effect</h3><ul>\n<li>首先是不明确，因为在effect中写入了其他信号值</li>\n<li>effect写入其他信号值可能会造成无限循环。</li>\n<li>而且关联关系并不明显</li>\n<li>effect应该是纯粹的</li>\n<li>一般来说应该尽量避免使用effect</li>\n</ul>\n<h3 id=\"用linkedSignal来重写上面逻辑吧\"><a href=\"#用linkedSignal来重写上面逻辑吧\" class=\"headerlink\" title=\"用linkedSignal来重写上面逻辑吧\"></a>用linkedSignal来重写上面逻辑吧</h3><div class=\"language-typescript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">typescript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">@</span><span style=\"color: #82AAFF\">Component</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F07178\">selector</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">linked-signal-demo</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F07178\">templateUrl</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">./linked-signal-demo.component.html</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">export</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">class</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #FFCB6B\">LinkedSignalDemoComponent</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #545454; font-style: italic\">// these are the products of the shopping cart </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F07178\">courses</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> [</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #F07178\">code</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">BEGINNERS</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #F07178\">title</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Angular for Beginners</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #F07178\">defaultQuantity</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">10</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #F07178\">code</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">SIGNALS</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #F07178\">title</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Angular Signals In Depth</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #F07178\">defaultQuantity</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">20</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #F07178\">code</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">SSR</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #F07178\">title</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Angular SSR In Depth</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #F07178\">defaultQuantity</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">30</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  ]</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #545454; font-style: italic\">// 下拉选择的产品</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F07178\">selectedCourse</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F07178\">signal</span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #FFCB6B\">string</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #FFCB6B\">null</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">BEGINNERS</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #545454; font-style: italic\">// 数量</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F07178\">quantity</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F07178\">linkedSignal</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F07178\">source</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">()</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> (</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\">courseCode</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #EEFFFF\">selectedCourse</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F07178\">computation</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">source</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #EEFFFF; font-style: italic\">previous</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #F07178\"> </span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #EEFFFF\">courses</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">find(</span><span style=\"color: #EEFFFF; font-style: italic\">c</span><span style=\"color: #F07178\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">c</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #EEFFFF\">code</span><span style=\"color: #F07178\"> </span></span>\n<span class=\"line\"><span style=\"color: #F07178\">      </span><span style=\"color: #89DDFF\">===</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">source</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">courseCode())</span><span style=\"color: #89DDFF\">?.</span><span style=\"color: #EEFFFF\">defaultQuantity</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">??</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F07178\">onQuantityChanged</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">quantity</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #FFCB6B\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #EEFFFF\">quantity</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">set</span><span style=\"color: #F07178\">(</span><span style=\"color: #82AAFF\">parseInt</span><span style=\"color: #F07178\">(</span><span style=\"color: #EEFFFF\">quantity</span><span style=\"color: #F07178\">))</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F07178\">onCourseSelected</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">courseCode</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #FFCB6B\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">this.</span><span style=\"color: #EEFFFF\">selectedCourse</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">set</span><span style=\"color: #F07178\">(</span><span style=\"color: #EEFFFF\">courseCode</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><ul>\n<li>现在使用linkedSignal更加优雅的解决了上面的问题。</li>\n<li><code>selectedCourse</code>和<code>quantity</code>信号之间的关系更加明确，可以在定义的地方发现。</li>\n<li><code>quantity</code>仍然是可写的，这样输入框可以直接改变值。</li>\n</ul>\n<h2 id=\"为什么不使用linkedSignal替换所有的computed？\"><a href=\"#为什么不使用linkedSignal替换所有的computed？\" class=\"headerlink\" title=\"为什么不使用linkedSignal替换所有的computed？\"></a>为什么不使用linkedSignal替换所有的computed？</h2><ul>\n<li>linkedSignal是一个新基础signal不是为了取代computed信号。</li>\n<li>只有很少见的场景需要用到linkedSignal。</li>\n<li>如果可以用computed解决问题，那么就没有必要使用 linkedSignal。</li>\n</ul>\n<h2 id=\"什么场景可以使用linkedSignal？\"><a href=\"#什么场景可以使用linkedSignal？\" class=\"headerlink\" title=\"什么场景可以使用linkedSignal？\"></a>什么场景可以使用linkedSignal？</h2><ul>\n<li>表单字段依赖于其他字段</li>\n<li>状态管理场景中，数值可能会被重置也可以被修改</li>\n<li>如果computed的限制性太强，但effect又过于必不可少，那么使用linkedSignal可能会更好。</li>\n</ul>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><ul>\n<li><code>linkedSignal</code> 基元填补了 Angular 基于信号的反应模型中的一个重要空白。</li>\n<li>它允许开发人员在信号之间定义可写的反应关系，非常适合字段重置等情况。</li>\n<li>虽然它完全不能取代 <code>computed</code> 或 <code>signal</code> ，但在需要可写计算值时，它提供了一个强大的替代方案。</li>\n<li>如果您已经在使用 Angular 的信号 API，请试试 <code>linkedSignal</code> - 它将有助于使您的代码更简洁、更易维护。</li>\n<li>但大多数问题还是尽量用 <code>computed</code> 和 <code>signal</code> 基元来解决，因为它们足以应付大多数情况。</li>\n</ul>\n","feature":true,"text":"随着Angular 19发布，Angular添加了一些新的功能。本文主要介绍Angular linked signal的基础用法和 computed 的区别，以...","permalink":"/post/angular-linked-signal","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[{"name":"ANGULAR","slug":"ANGULAR","count":8,"path":"api/categories/ANGULAR.json"}],"tags":[{"name":"angular signal","slug":"angular-signal","count":1,"path":"api/tags/angular-signal.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Angular-Linked-Signal-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F\"><span class=\"toc-text\">Angular Linked Signal 是什么？</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#linkedSignal-%E5%85%B3%E9%94%AE%E8%AF%8D\"><span class=\"toc-text\">linkedSignal 关键词</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BAlinkedSignal%EF%BC%9F\"><span class=\"toc-text\">如何创建linkedSignal？</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8linkedSignal%EF%BC%9F\"><span class=\"toc-text\">什么时候使用linkedSignal？</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AE%A9%E6%88%91%E4%BB%AC%E4%BB%8E%E4%B8%80%E4%B8%AA%E5%AE%9E%E9%99%85%E7%9A%84%E4%BE%8B%E5%AD%90%E5%87%BA%E5%8F%91%F0%9F%9A%80\"><span class=\"toc-text\">让我们从一个实际的例子出发🚀</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89linkedSignal%E6%88%91%E4%BB%AC%E5%BA%94%E8%AF%A5%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E4%B8%8A%E9%9D%A2%E7%9A%84%E9%80%BB%E8%BE%91%F0%9F%A4%94\"><span class=\"toc-text\">如果没有linkedSignal我们应该怎么实现上面的逻辑🤔</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E4%BD%BF%E7%94%A8effect\"><span class=\"toc-text\">为什么不使用effect</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%94%A8linkedSignal%E6%9D%A5%E9%87%8D%E5%86%99%E4%B8%8A%E9%9D%A2%E9%80%BB%E8%BE%91%E5%90%A7\"><span class=\"toc-text\">用linkedSignal来重写上面逻辑吧</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E4%BD%BF%E7%94%A8linkedSignal%E6%9B%BF%E6%8D%A2%E6%89%80%E6%9C%89%E7%9A%84computed%EF%BC%9F\"><span class=\"toc-text\">为什么不使用linkedSignal替换所有的computed？</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8linkedSignal%EF%BC%9F\"><span class=\"toc-text\">什么场景可以使用linkedSignal？</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li></ol>","author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"[译]angular变更检查历史","uid":"02dceeb1c9680db6bfa35b02b26a819e","slug":"angular-change-detection","date":"2024-08-13T11:34:54.108Z","updated":"2025-07-10T03:02:34.368Z","comments":true,"path":"api/articles/angular-change-detection.json","keywords":null,"cover":"https://img.kidwen.top/file/185cb46c7e9cf3d06d35f.jpg","text":"Angular 是一个组件驱动框架。和其他框架一样，他向用户展示数据并在数据变化后刷新视图。 在模版中显示用户数据 随着项目的增长，我们会创建越来越多的组件，并...","permalink":"/post/angular-change-detection","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"13 mins."},"categories":[{"name":"ANGULAR","slug":"ANGULAR","count":8,"path":"api/categories/ANGULAR.json"}],"tags":[{"name":"angular","slug":"angular","count":5,"path":"api/tags/angular.json"},{"name":"zone.js","slug":"zone-js","count":1,"path":"api/tags/zone-js.json"},{"name":"zoneless","slug":"zoneless","count":1,"path":"api/tags/zoneless.json"},{"name":"local change detection","slug":"local-change-detection","count":1,"path":"api/tags/local-change-detection.json"},{"name":"signals","slug":"signals","count":1,"path":"api/tags/signals.json"}],"author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}