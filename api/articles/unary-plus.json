{"title":"一元加运算符","uid":"b28fd708a6b0cdabb2826b2e3d8e93bc","slug":"unary-plus","date":"2024-04-25T05:48:28.764Z","updated":"2024-06-14T02:40:14.406Z","comments":true,"path":"api/articles/unary-plus.json","keywords":null,"cover":"https://img.kidwen.top/file/dd54dea948e128b8fea23.png","content":"<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Unary_plus\">一元加（+）</a>对其操作数进行<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number#%E5%BC%BA%E5%88%B6%E6%95%B0%E5%AD%97%E8%BD%AC%E6%8D%A2\">强制数字转换</a>，对于大多数没有 <code>@@toPrimitive</code> 的对象，这意味着调用其 <code>valueOf()</code>。但是，如果对象没有自定义的 <code>valueOf()</code> 方法，则基本实现将导致忽略 <code>valueOf()</code>，而使用 <code>toString()</code> 的返回值。</p>\n<h1>一元加结果</h1>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#F97583\">+new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">(); </span><span style=\"color:#6A737D\">// 当前时间戳；与 new Date().getTime() 相同</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">+</span><span style=\"color:#E1E4E8\">&#123;&#125;; </span><span style=\"color:#6A737D\">// NaN（toString() 返回 \"[object Object]\"）</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">+</span><span style=\"color:#E1E4E8\">[]; </span><span style=\"color:#6A737D\">// 0（toString() 返回一个空的字符串列表）</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">+</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#79B8FF\">1</span><span style=\"color:#E1E4E8\">]; </span><span style=\"color:#6A737D\">// 1（toString() 返回 \"1\"）</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">+</span><span style=\"color:#E1E4E8\">[</span><span style=\"color:#79B8FF\">1</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#79B8FF\">2</span><span style=\"color:#E1E4E8\">]; </span><span style=\"color:#6A737D\">// NaN（toString() 返回 \"1,2\"）</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">+new</span><span style=\"color:#B392F0\"> Set</span><span style=\"color:#E1E4E8\">([</span><span style=\"color:#79B8FF\">1</span><span style=\"color:#E1E4E8\">]); </span><span style=\"color:#6A737D\">// NaN（toString() 返回 \"[object Set]\"）</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">+</span><span style=\"color:#E1E4E8\">&#123; </span><span style=\"color:#B392F0\">valueOf</span><span style=\"color:#E1E4E8\">: () </span><span style=\"color:#F97583\">=></span><span style=\"color:#79B8FF\"> 42</span><span style=\"color:#E1E4E8\"> &#125;; </span><span style=\"color:#6A737D\">// 42</span></span></code></pre>\n<h1>Symbol.toPrimitive</h1>\n<p><strong><code>Symbol.toPrimitive</code></strong> 是内置的 symbol 属性，其指定了一种接受首选类型并返回对象原始值的表示的方法。它被所有的<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures#%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2\">强类型转换制</a>算法优先调用。</p>\n<p><code>hint</code> 参数的取值是 <code>&quot;number&quot;</code>、<code>&quot;string&quot;</code> 和 <code>&quot;default&quot;</code> 中的任意一个。</p>\n<p><code>&quot;number&quot;</code> hint 用于<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures#%E5%BC%BA%E5%88%B6%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2\">强制数字类型转换</a>算法。<code>&quot;string&quot;</code> hint 用于<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2\">强制字符串类型转换</a>算法。<code>&quot;default&quot;</code> hint 用于<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Data_structures#%E5%BC%BA%E5%88%B6%E5%8E%9F%E5%A7%8B%E5%80%BC%E8%BD%AC%E6%8D%A2\">强制原始值转换</a>算法。</p>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> object1</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">  [Symbol.toPrimitive](</span><span style=\"color:#FFAB70\">hint</span><span style=\"color:#E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (hint </span><span style=\"color:#F97583\">===</span><span style=\"color:#9ECBFF\"> 'number'</span><span style=\"color:#E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">      return</span><span style=\"color:#79B8FF\"> 42</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    return</span><span style=\"color:#79B8FF\"> null</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#125;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">console.</span><span style=\"color:#B392F0\">log</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">+</span><span style=\"color:#E1E4E8\">object1);</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">// Expected output: 42</span></span></code></pre>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#6A737D\">// 一个没有提供 Symbol.toPrimitive 属性的对象，参与运算时的输出结果</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> obj1</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> &#123;&#125;;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">console.</span><span style=\"color:#B392F0\">log</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">+</span><span style=\"color:#E1E4E8\">obj1); </span><span style=\"color:#6A737D\">// NaN</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">console.</span><span style=\"color:#B392F0\">log</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">`$&#123;</span><span style=\"color:#E1E4E8\">obj1</span><span style=\"color:#9ECBFF\">&#125;`</span><span style=\"color:#E1E4E8\">); </span><span style=\"color:#6A737D\">// \"[object Object]\"</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">console.</span><span style=\"color:#B392F0\">log</span><span style=\"color:#E1E4E8\">(obj1 </span><span style=\"color:#F97583\">+</span><span style=\"color:#9ECBFF\"> ''</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#6A737D\">// \"[object Objext]\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">// 接下来声明一个对象，手动赋予了 Symbol.toPrimitive 属性，再来查看输出结果</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> obj2</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    [Symbol.toPrimitive](</span><span style=\"color:#FFAB70\">hint</span><span style=\"color:#E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        if</span><span style=\"color:#E1E4E8\">(hint </span><span style=\"color:#F97583\">===</span><span style=\"color:#9ECBFF\"> 'number'</span><span style=\"color:#E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            return</span><span style=\"color:#79B8FF\"> 10</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        &#125;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        if</span><span style=\"color:#E1E4E8\">(hint </span><span style=\"color:#F97583\">===</span><span style=\"color:#9ECBFF\"> 'string'</span><span style=\"color:#E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">            return</span><span style=\"color:#9ECBFF\"> 'hello'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">        &#125;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#79B8FF\"> true</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#125;;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">console.</span><span style=\"color:#B392F0\">log</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">+</span><span style=\"color:#E1E4E8\">obj2); </span><span style=\"color:#6A737D\">// 10 - hint 参数值是 'number'</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">console.</span><span style=\"color:#B392F0\">log</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">`$&#123;</span><span style=\"color:#E1E4E8\">obj2</span><span style=\"color:#9ECBFF\">&#125;`</span><span style=\"color:#E1E4E8\">); </span><span style=\"color:#6A737D\">// 'hello' - hint 参数值是 'string'</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">console.</span><span style=\"color:#B392F0\">log</span><span style=\"color:#E1E4E8\">(obj2 </span><span style=\"color:#F97583\">+</span><span style=\"color:#9ECBFF\"> ''</span><span style=\"color:#E1E4E8\">); </span><span style=\"color:#6A737D\">// \"true\" - hint 参数值是 'default'</span></span></code></pre>\n<h1>Symbol.prototype[@@toPrimitive]</h1>\n<p><strong><code>[@@toPrimitive]()</code></strong> 方法可将 Symbol 对象转换为原始值。</p>\n<p>JavaScript 调用 <code>[@@toPrimitive]()</code> 方法将一个对象转换为原始值表示。你不需要自己调用 <code>[@@toPrimitive]()</code> 方法；当对象需要被转换为原始值时，JavaScript 会自动地调用该方法。</p>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> sym</span><span style=\"color:#F97583\"> =</span><span style=\"color:#B392F0\"> Symbol</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">\"example\"</span><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">sym </span><span style=\"color:#F97583\">===</span><span style=\"color:#E1E4E8\"> sym[Symbol.toPrimitive](); </span><span style=\"color:#6A737D\">// true</span></span>\n<span class=\"line\"></span></code></pre>\n","text":"一元加（+）对其操作数进行强制数字转换，对于大多数没有 @@toPrimitive 的对象，这意味着调用其 valueOf()。但是，如果对象没有自定义的 va...","permalink":"/post/unary-plus","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[{"name":"JAVASCRIPT","slug":"JAVASCRIPT","count":3,"path":"api/categories/JAVASCRIPT.json"}],"tags":[{"name":"javascript","slug":"javascript","count":3,"path":"api/tags/javascript.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\"><span class=\"toc-text\">一元加结果</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\"><span class=\"toc-text\">Symbol.toPrimitive</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\"><span class=\"toc-text\">Symbol.prototype[@@toPrimitive]</span></a></li></ol>","author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"cloudflare work 随机获取bing图片","uid":"f95226d9f0855b378f638cf659474409","slug":"bing-rand-image","date":"2024-06-11T03:50:02.722Z","updated":"2024-06-27T03:05:31.451Z","comments":true,"path":"api/articles/bing-rand-image.json","keywords":null,"cover":"https://rand-img.kidwen.top?rand=true","text":"Cloudflare Workers 是一个无服务器计算平台，允许开发人员在 Cloudflare 的边缘网络上运行 JavaScript 代码。它提供了强大的...","permalink":"/post/bing-rand-image","photos":[],"count_time":{"symbolsCount":"2.8k","symbolsTime":"3 mins."},"categories":[{"name":"TOOL","slug":"TOOL","count":11,"path":"api/categories/TOOL.json"}],"tags":[{"name":"cloudflare","slug":"cloudflare","count":1,"path":"api/tags/cloudflare.json"},{"name":"bing","slug":"bing","count":1,"path":"api/tags/bing.json"}],"author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"[转载]Serv00搭建各种服务","uid":"f3b0ad915ecd5edf3452c4d2cf36b427","slug":"serv00","date":"2024-04-18T11:50:43.183Z","updated":"2024-05-02T17:54:49.650Z","comments":true,"path":"api/articles/serv00.json","keywords":null,"cover":"https://img.kidwen.top/file/4dd73a8b669bb43b0cffb.jpg","text":"这个平台是个 Virtual Host ，没有 Root ，还是 FreeBSD 的系统，不是 Linux ，不太好用。但是优点是隔离性差， Memory 和 ...","permalink":"/post/serv00","photos":[],"count_time":{"symbolsCount":"45k","symbolsTime":"41 mins."},"categories":[{"name":"serv00","slug":"serv00","count":1,"path":"api/categories/serv00.json"}],"tags":[{"name":"pm2","slug":"pm2","count":1,"path":"api/tags/pm2.json"},{"name":"wordpress","slug":"wordpress","count":1,"path":"api/tags/wordpress.json"},{"name":"kodbox","slug":"kodbox","count":1,"path":"api/tags/kodbox.json"},{"name":"lsky-pro","slug":"lsky-pro","count":1,"path":"api/tags/lsky-pro.json"},{"name":"vless","slug":"vless","count":1,"path":"api/tags/vless.json"},{"name":"alist","slug":"alist","count":1,"path":"api/tags/alist.json"},{"name":"synctv","slug":"synctv","count":1,"path":"api/tags/synctv.json"},{"name":"one-api","slug":"one-api","count":1,"path":"api/tags/one-api.json"},{"name":"uptime-kuma","slug":"uptime-kuma","count":1,"path":"api/tags/uptime-kuma.json"},{"name":"bingo","slug":"bingo","count":1,"path":"api/tags/bingo.json"},{"name":"refresh-gpt-chat","slug":"refresh-gpt-chat","count":1,"path":"api/tags/refresh-gpt-chat.json"},{"name":"gpt4-copilot-java","slug":"gpt4-copilot-java","count":1,"path":"api/tags/gpt4-copilot-java.json"},{"name":"zfile","slug":"zfile","count":1,"path":"api/tags/zfile.json"},{"name":"helo","slug":"helo","count":1,"path":"api/tags/helo.json"},{"name":"go-proxy-bingai","slug":"go-proxy-bingai","count":1,"path":"api/tags/go-proxy-bingai.json"},{"name":"pentaract","slug":"pentaract","count":1,"path":"api/tags/pentaract.json"},{"name":"onelist","slug":"onelist","count":1,"path":"api/tags/onelist.json"},{"name":"warpgpt","slug":"warpgpt","count":1,"path":"api/tags/warpgpt.json"},{"name":"coze-discord-proxy","slug":"coze-discord-proxy","count":1,"path":"api/tags/coze-discord-proxy.json"},{"name":"memos","slug":"memos","count":1,"path":"api/tags/memos.json"},{"name":"frps","slug":"frps","count":1,"path":"api/tags/frps.json"},{"name":"rclone","slug":"rclone","count":1,"path":"api/tags/rclone.json"},{"name":"cloudreve","slug":"cloudreve","count":1,"path":"api/tags/cloudreve.json"},{"name":"panindex","slug":"panindex","count":1,"path":"api/tags/panindex.json"}],"author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}