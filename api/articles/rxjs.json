{"title":"rxjs","uid":"9170303394444f49789e30f6c5748970","slug":"rxjs","date":"2023-07-10T02:30:00.000Z","updated":"2024-11-12T11:42:21.008Z","comments":true,"path":"api/articles/rxjs.json","keywords":null,"cover":"/images/rxjs.png","content":"<p>RxJS（Reactive Extensions for JavaScript）是一个用于处理异步和事件驱动编程的库。它基于<code>观察者模式</code>和<code>迭代器模式</code>，并引入了一些函数式编程的概念。RxJS 提供了一组强大的工具和操作符，可以帮助开发者处理和组合异步数据流。</p>\n<p>RxJS 是一个用于响应式编程的库，它的核心概念是 Observable（可观察对象）。Observable 表示一个可能会产生多个值的异步数据源。通过使用 RxJS，你可以对这些数据流进行处理、转换和组合，从而实现更简洁和可维护的代码。</p>\n<p>通常在 RxJS 中，有两种类型的数据流：“冷”（cold）和“热”（hot）数据流。对于“冷”数据流，Observable 只有在被订阅时才会开始发出值，并且每个订阅者都会收到一份独立的数据流副本。而对于“热”数据流，数据可能在 Observable 被订阅之前就已经开始发出，并且所有订阅者共享同一个数据源。</p>\n<p>RxJS 提供了许多操作符，可以对 Observable 进行各种转换和过滤操作。这些操作符包括映射（map）、过滤（filter）、合并（merge）、延迟（delay）、缓冲（buffer）等等。通过组合这些操作符，你可以构建出复杂的数据流处理逻辑。</p>\n<p>除了操作符，RxJS 还提供了一些工具函数和实用程序，例如调度器（Scheduler）、主题（Subject）和订阅（Subscription）等。调度器用于控制 Observable 在何时发出通知，主题充当事件总线，而订阅则用于管理和取消订阅。</p>\n<p>总结：RxJS 是一个强大的前端库，用于处理异步数据流和事件驱动编程。它提供了丰富的操作符和工具函数，可以帮助开发者处理和组合复杂的数据流。通过使用 RxJS，你可以编写出更具可读性和可维护性的异步代码。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>RxJS 管理异步事件中的要素概念包括以下几点：</p></blockquote>\n<ul>\n<li>Observable:   代表未来值或事件的可调用集合的想法。</li>\n<li>Observer:     是一个回调集合，它知道如何监听 Observable 传递的值。</li>\n<li>Subscription: 表示 Observable 的执行，主要用于取消执行。</li>\n<li>Operators:    是纯函数，支持使用函数式编程风格处理集合，例如map、filter、concat、reduce 等操作。</li>\n<li>Subject:      相当于EventEmitter，也是将值或事件多播到多个观察者的唯一方法。</li>\n<li>Schedulers:   是控制并发的集中调度程序，允许我们在计算发生时进行协调，例如setTimeout 或 requestAnimationFrame 或其他。</li>\n</ul>\n<h3 id=\"Observable\"><a href=\"#Observable\" class=\"headerlink\" title=\"Observable\"></a><a href=\"https://rxjs.dev/guide/observable\">Observable</a></h3><ul>\n<li><p><code>Pull systems</code> 消费者决定什么时候从数据生产者哪里获取数据，而生成者不知道什么时候将数据送给消费者。每一个js方法都是一个<code>Pull system</code>，包括 <code>generator 函数</code>。</p>\n</li>\n<li><p><code>Push systems</code> 生产者确定什么时候向消费者发送数据，而消费者不知道什么时候会收到这些数据。<code>Promises</code> 是<code>Pull systems</code>中最通用的类型。</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">Observable</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">rxjs</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> observable </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">new</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #82AAFF\">Observable</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">subscriber</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #EEFFFF\">subscriber</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">next</span><span style=\"color: #F07178\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #EEFFFF\">subscriber</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">next</span><span style=\"color: #F07178\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #82AAFF\">setTimeout</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #F07178\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #EEFFFF\">subscriber</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">next</span><span style=\"color: #F07178\">(</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #EEFFFF\">subscriber</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">complete</span><span style=\"color: #F07178\">()</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;,</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1000</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">订阅开始</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">observable</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">subscribe</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F07178\">next</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">x</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #EEFFFF\">console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">got value </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">x</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F07178\">error</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">err</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #EEFFFF\">console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">error</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">something wrong occurred: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">err</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F07178\">complete</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #EEFFFF\">console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">done</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">订阅结束</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// 订阅开始</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// 1</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// 2</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// 订阅结束</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// got value 3</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// done</span></span></code></pre></div></li>\n</ul>\n<h3 id=\"Observer\"><a href=\"#Observer\" class=\"headerlink\" title=\"Observer\"></a><a href=\"https://rxjs.dev/guide/observer\">Observer</a></h3><ul>\n<li><p>观察者是 Observable 传递的值的消费者。观察者只是一组回调，每个回调对应 Observable 传递的每种类型的通知：下一步、错误和完成。</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> observer </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #82AAFF\">next</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #EEFFFF; font-style: italic\">x</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">Observer got a next value: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #EEFFFF\"> x)</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #82AAFF\">error</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #EEFFFF; font-style: italic\">err</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">error</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">Observer got an error: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #EEFFFF\"> err)</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #82AAFF\">complete</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">()</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">Observer got a complete notification</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;;</span></span></code></pre></div></li>\n<li><p>要使用观察者，可以将其提供给 Observable 的订阅：</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #EEFFFF\">observable</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">subscribe</span><span style=\"color: #EEFFFF\">(observer)</span><span style=\"color: #89DDFF\">;</span></span></code></pre></div></li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>观察者只是具有三个回调的对象，每个回调对应 Observable 可能传递的每种类型的通知。</p></blockquote>\n<ul>\n<li><p>RxJS 中的观察者也可能是片面的。如果你不提供其中一种回调，Observable 的执行仍然会正常发生，除了某些类型的通知将被忽略，因为它们在观察者中没有相应的回调。</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #545454; font-style: italic\">// 没有 complete 回掉方法</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> observer </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #82AAFF\">next</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #EEFFFF; font-style: italic\">x</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">Observer got a next value: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #EEFFFF\"> x)</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #82AAFF\">error</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #EEFFFF; font-style: italic\">err</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">error</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">Observer got an error: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #EEFFFF\"> err)</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;;</span></span></code></pre></div></li>\n<li><p>当订阅 Observable 时，也可以只提供下一个回调作为参数，而不附加到 Observer 对象，例如如下所示：</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #545454; font-style: italic\">// 在 observable.subscribe 内部，它将使用回调参数作为下一个处理程序创建一个 Observer 对象。</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">observable</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">subscribe</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">x</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">Observer got a next value: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #EEFFFF\"> x))</span><span style=\"color: #89DDFF\">;</span></span></code></pre></div></li>\n</ul>\n<h3 id=\"Subscription\"><a href=\"#Subscription\" class=\"headerlink\" title=\"Subscription\"></a><a href=\"https://rxjs.dev/guide/subscription\">Subscription</a></h3><p><code>Subscription</code>是一个代表一次性资源的对象，通常是 <code>Observable</code> 的执行。<code>Subscription</code>有一个重要的方法，<code>unsubscribe</code>，它不带任何参数，只处理订阅所持有的资源。在以前的 RxJS 版本中，订阅被称为“Disposable”。</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">interval</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">rxjs</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> observable </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #82AAFF\">interval</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #F78C6C\">1000</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> subscription </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> observable</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">subscribe</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">x</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #EEFFFF\">(x))</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">subscription</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">unsubscribe</span><span style=\"color: #EEFFFF\">()</span><span style=\"color: #89DDFF\">;</span></span></code></pre></div><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>订阅本质上只有一个 unsubscribe() 函数来释放资源或取消 Observable 执行。</p></blockquote>\n<p>订阅也可以放在一起，以便调用一个订阅的 unsubscribe() 可以取消订阅多个订阅。您可以通过将一个订阅“添加”到另一个订阅中来完成此操作：</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">interval</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">rxjs</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> observable1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #82AAFF\">interval</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #F78C6C\">400</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> observable2 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #82AAFF\">interval</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #F78C6C\">300</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> subscription </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> observable1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">subscribe</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">x</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">first: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #EEFFFF\"> x))</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> childSubscription </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> observable2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">subscribe</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">x</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">second: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #EEFFFF\"> x))</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">subscription</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">add</span><span style=\"color: #EEFFFF\">(childSubscription)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">setTimeout</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">  </span><span style=\"color: #545454; font-style: italic\">// 同时取消订阅 subscription 和 childSubscription</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">  </span><span style=\"color: #EEFFFF\">subscription</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">unsubscribe</span><span style=\"color: #F07178\">()</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;,</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1000</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// second: 0</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// first: 0</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// second: 1</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// first: 1</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// second: 2</span></span></code></pre></div><p>订阅还有一个<code>remove(otherSubscription)</code>方法，以便撤消添加的子订阅。</p>\n<h3 id=\"Subject\"><a href=\"#Subject\" class=\"headerlink\" title=\"Subject\"></a><a href=\"https://rxjs.dev/guide/subject\">Subject</a></h3><p><code>Subject</code>是一个复合结构体，它有双重身份，既可以是可观察对象<code>Observable</code>也可以是观察者<code>Observer</code>。<code>Subject</code> 实例被称为“热”的（hot），是因为它们在有订阅者（Subscribers）订阅之前就可能已经生成并发出数据了。</p>\n<h4 id=\"BehaviorSubject\"><a href=\"#BehaviorSubject\" class=\"headerlink\" title=\"BehaviorSubject\"></a>BehaviorSubject</h4><p>BehaviorSubject 是 Subject 的一种变体，也就是说，BehaviorSubject 同时是一个 Observable 也是一个 Subject.</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>不同：BehaviorSubject 在首次订阅前有一个初始值，并且会在订阅者首次订阅时提供一个与之前状态相关的初始值。</p></blockquote>\n<h4 id=\"ReplaySubject\"><a href=\"#ReplaySubject\" class=\"headerlink\" title=\"ReplaySubject\"></a>ReplaySubject</h4><p>ReplaySubject 是 RxJS 库中的一种类型，属于热 Observable。ReplaySubject 存储并重新发送订阅操作前发布的数据。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ReplaySubject 可按指定的缓冲容量创建。例如，如果缓冲容量为 2，则会重放最后两个值。</p></blockquote>\n<div class=\"language-typescript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">typescript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> data$ </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">new</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #82AAFF\">ReplaySubject</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">data$</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">next</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">data 1</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">data$</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">next</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">data 2</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">data$</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">next</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">data 3</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> subscription1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> data$</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">subscribe</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #82AAFF\">next</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #EEFFFF; font-style: italic\">data</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">Subscribe 1: </span><span style=\"color: #89DDFF\">$&#123;</span><span style=\"color: #EEFFFF\">data</span><span style=\"color: #89DDFF\">&#125;`</span><span style=\"color: #EEFFFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> subscription2 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> data$</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">subscribe</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #82AAFF\">next</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #EEFFFF; font-style: italic\">data</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">Subscribe 2: </span><span style=\"color: #89DDFF\">$&#123;</span><span style=\"color: #EEFFFF\">data</span><span style=\"color: #89DDFF\">&#125;`</span><span style=\"color: #EEFFFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// Output:</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// Subscribe 1: data 2</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// Subscribe 1: data 3</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// Subscribe 2: data 2</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// Subscribe 2: data 3</span></span></code></pre></div><h3 id=\"Schedulers\"><a href=\"#Schedulers\" class=\"headerlink\" title=\"Schedulers\"></a><a href=\"https://rxjs.dev/guide/scheduler\">Schedulers</a></h3><h3 id=\"Operators\"><a href=\"#Operators\" class=\"headerlink\" title=\"Operators\"></a><a href=\"https://rxjs.dev/guide/operators\">Operators</a></h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>创建类</p>\n<blockquote>\n<p>of: 根据传入的参数创建Observable对象，of 产生的是 Cold Observable，对于每一个Observer都会重复吐出同样的数据。</p>\n<div class=\"language-javascript\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">javascript</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #545454; font-style: italic\">// export function of&lt;A extends readonly unknown[]&gt;(...values: A): Observable&lt;ValueFromArray&lt;A&gt;&gt;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">of</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">rxjs</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> source$ </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #82AAFF\">of</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #89DDFF\">...</span><span style=\"color: #EEFFFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #EEFFFF\">])</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">source$</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">subscribe</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">data</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #EEFFFF\">console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">First: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">data</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">source$</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">subscribe</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">data</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #EEFFFF\">console</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">log</span><span style=\"color: #F07178\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">Second: </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #EEFFFF\">data</span><span style=\"color: #F07178\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// 第一次监听的打印</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// First: 1</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// First: 2</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// First: 3</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// 第二次监听的打印</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// Second: 1</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// Second: 2</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// Second: 3</span></span></code></pre></div></blockquote>\n<p>转化类</p>\n<p>过滤类</p>\n<blockquote>\n<p>skip: 允许忽略源 observable 开头的n个值，可以用于忽略Replay或者BehaviorSubject的初始值，也可以用filter加索引模拟skip。</p>\n<div class=\"language-js\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">js</span><pre class=\"shiki material-theme-darker\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">const</span><span style=\"color: #EEFFFF\"> sourse </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #82AAFF\">interval</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span>\n<span class=\"line\"><span style=\"color: #545454; font-style: italic\">// 忽略前十个值</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">source</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">pip</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #82AAFF\">skip</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #EEFFFF\">))</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">subcribe</span><span style=\"color: #EEFFFF\">(</span><span style=\"color: #EEFFFF; font-style: italic\">value</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C792EA\">=&gt;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;&#125;</span><span style=\"color: #EEFFFF\">)</span><span style=\"color: #89DDFF\">;</span></span></code></pre></div><p>filter: 发出符合条件的值</p></blockquote>\n<p>合并类</p>\n<p>多播类</p>\n<p>错误处理类</p>\n<p>辅助工具类</p>\n<p>条件分支类</p>\n<p>数学和合计类</p>\n</blockquote>\n<h3 id=\"弹珠图\"><a href=\"#弹珠图\" class=\"headerlink\" title=\"弹珠图\"></a>弹珠图</h3>","text":"RxJS（Reactive Extensions for JavaScript）是一个用于处理异步和事件驱动编程的库。它基于观察者模式和迭代器模式，并引入了一些...","permalink":"/post/rxjs","photos":[],"count_time":{"symbolsCount":"5.8k","symbolsTime":"5 mins."},"categories":[{"name":"TOOL","slug":"TOOL","count":10,"path":"api/categories/TOOL.json"}],"tags":[{"name":"rxjs","slug":"rxjs","count":1,"path":"api/tags/rxjs.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Observable\"><span class=\"toc-text\">Observable</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Observer\"><span class=\"toc-text\">Observer</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Subscription\"><span class=\"toc-text\">Subscription</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Subject\"><span class=\"toc-text\">Subject</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#BehaviorSubject\"><span class=\"toc-text\">BehaviorSubject</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#ReplaySubject\"><span class=\"toc-text\">ReplaySubject</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Schedulers\"><span class=\"toc-text\">Schedulers</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Operators\"><span class=\"toc-text\">Operators</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%B9%E7%8F%A0%E5%9B%BE\"><span class=\"toc-text\">弹珠图</span></a></li></ol>","author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"lodash","uid":"d7acadbeb31d4d41403b5db5aed2bd4c","slug":"lodash","date":"2023-07-10T09:00:00.000Z","updated":"2025-07-18T07:12:57.027Z","comments":true,"path":"api/articles/lodash.json","keywords":null,"cover":"/images/lodash.webp","text":"一个现代 JavaScript 实用程序库，提供模块化、性能和附加功能。 ","permalink":"/post/lodash","photos":[],"count_time":{"symbolsCount":37,"symbolsTime":"1 mins."},"categories":[{"name":"TOOL","slug":"TOOL","count":10,"path":"api/categories/TOOL.json"}],"tags":[{"name":"lodash","slug":"lodash","count":1,"path":"api/tags/lodash.json"}],"author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"响应式主题","uid":"26df78b12ea8461da2d0f20e21f4a6a9","slug":"theming","date":"2023-06-15T05:30:00.000Z","updated":"2024-08-29T02:19:55.786Z","comments":true,"path":"api/articles/theming.json","keywords":null,"cover":"/images/theming.jpeg","text":"将页面自适应匹配用户的喜好，例如黑色模式 可以调整网站的展示以匹配用户的喜好。首先，需要知道如何借力浏览器来增加网站曝光从而提高品牌知名度。 自定义浏览器界面一...","permalink":"/post/theming","photos":[],"count_time":{"symbolsCount":"4.7k","symbolsTime":"4 mins."},"categories":[{"name":"CSS","slug":"CSS","count":4,"path":"api/categories/CSS.json"}],"tags":[],"author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":false}}