{"title":"使用qexo管理hexo博客并自动发布","uid":"01d2f05fbd218c890b1d1ad74fd069bb","slug":"qexo-hexo","date":"2023-09-15T06:20:09.247Z","updated":"2025-07-10T07:18:20.981Z","comments":true,"path":"api/articles/qexo-hexo.json","keywords":null,"cover":"https://s2.loli.net/2023/09/15/mtT5HCxISknFzdV.png","content":"<p>本文介绍使用 <code>qexo</code>后台管理 <code>hexo</code>博客并自动推送修改到 <code>github</code>仓库，然后由 <code>github action</code>自动部署并发布。由于我的博客分为两个仓库(博客源码的仓库，静态文件仓库)，所以本文将介绍两个仓库的用法，如果为单仓库可以参考<a href=\"https://hexo.io/docs/github-pages\">hexo github action教程</a>。</p>\n<h2 id=\"准备\">准备</h2>\n<ul>\n<li>两个代码仓库</li>\n<li>vercel账号</li>\n<li><a href=\"https://sm.ms/\">sm.ms</a>账号（有自己托管图片的工具则不需要）</li>\n</ul>\n<p><strong>好了，我们开始吧！！！</strong></p>\n<h2 id=\"部署后台管理工具Qexo\">部署后台管理工具<a href=\"https://www.oplog.cn/qexo/start/build.html#vercel-%E9%83%A8%E7%BD%B2-postgresql-vercel\">Qexo</a></h2>\n<p>qexo是一个有趣的Hexo 编辑器，下面截图是后台管理主界面，可以看到有文章、页面、图片、配置、图片、友链、说说、自定义字段，这些都是对应博客仓库的。右上角有设置对应的是qexo初始化时候的配置信息，使用它我们就可以在线编辑博客啦～</p>\n<p><img src=\"https://s2.loli.net/2023/09/15/ApbOoSXZ8u6IeFC.png\" alt=\"主界面\"></p>\n<h3 id=\"部署Qexo到Vercel\">部署Qexo到Vercel</h3>\n<ol>\n<li>\n<p><a href=\"https://vercel.com/new/clone?repository-url=https://github.com/am-abudu/Qexo\"><img src=\"https://vercel.com/button\" alt=\"\"></a></p>\n<ul>\n<li>fork 仓库并开始部署</li>\n<li><strong>首次部署会报错, 请无视并继续</strong></li>\n</ul>\n</li>\n<li>\n<p>申请 Vercel 数据库</p>\n<ul>\n<li>进入<a href=\"https://vercel.com/dashboard/stores\">Vercel Storage 界面</a> 然后点击右上角的 Create Database 并选择 Postgres 创建免费 PostgreSQL 数据库, 在 Connect 页面获取数据库连接信息。请注意在地区选择的位置选择与你上一步项目对应的地区（通常为 Washington, D.C., USA (East) - iad1）。</li>\n</ul>\n</li>\n<li>\n<p>绑定项目</p>\n<ul>\n<li>在左侧边栏选择 Projects 点击 Connect Project 连接到第一步创建的项目</li>\n</ul>\n</li>\n<li>\n<p>部署</p>\n<ul>\n<li>回到你的项目页面，在 Deployments 点击 Redeploy 开始部署, 若没有 Error 信息即可打开域名进入初始化引导。</li>\n</ul>\n</li>\n<li>\n<p>配置自定义域名（可选）</p>\n<ul>\n<li>进入vercel创建的项目中点击 <code>Settings</code>选择 <code>Domains</code>添加一个你拥有的域名吧！</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"配置Qexo\">配置Qexo</h3>\n<p><img src=\"https://s2.loli.net/2023/09/20/RToSV1Mdz9iIDfH.png\" alt=\"https://s2.loli.net/2023/09/20/RToSV1Mdz9iIDfH.png\"></p>\n<ol>\n<li>\n<p>创建登陆用户-输入用户名和密码，API密匙可以留空。</p>\n<p><img src=\"https://s2.loli.net/2023/09/20/UYkjyDZNvtuGqcd.png\" alt=\"https://s2.loli.net/2023/09/20/UYkjyDZNvtuGqcd.png\"></p>\n</li>\n<li>\n<p>github token 创建位置: user setting -&gt; developer setting -&gt; personal access tokens -&gt; tokens(classic), ⚠️仓库地址填写博客源码的仓库不要带 <code>https://github.com</code>前缀</p>\n<p><img src=\"https://s2.loli.net/2023/09/20/ptsceW2X9MYj7aH.png\" alt=\"https://s2.loli.net/2023/09/20/ptsceW2X9MYj7aH.png\"></p>\n</li>\n<li>\n<p>Vercel配置</p>\n<ul>\n<li>Vercel 账户密钥 在 <a href=\"https://vercel.com/account/tokens\">此处</a> 生成</li>\n<li>Qexo 部署所在项目的 ID 位于 Project Settings -&gt; General -&gt; Project ID</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"配置Qexo图床\">配置Qexo图床</h3>\n<p>Qexo支持 <code>远程API</code>、<code>S3协议</code>、<code>FTP协议</code>和 <code>GITHUB</code>(不建议)</p>\n<ol>\n<li>\n<p>我选择的是远程API使用SM.MS来保存图片，<a href=\"https://www.oplog.cn/qexo/practice/smms.html\">教程</a>。但是其中遇到一些问，api调用一直失败json解析报错，原因：设置 -&gt; 图床配置 -&gt; 自定义请求头 <strong><code>{&quot;Authorization&quot;:&quot;XXXXXXXXXXXXXX&quot;}</code>，冒号后面不能有空格！！！</strong></p>\n<ul>\n<li><code>Authorization</code>字段<a href=\"https://sm.ms/home/apitoken\">地址</a></li>\n</ul>\n</li>\n</ol>\n<h2 id=\"代码仓库CI-CD\">代码仓库CI/CD</h2>\n<ol>\n<li>\n<p>创建Secrets</p>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#79B8FF\">   cd</span><span style=\"color:#9ECBFF\"> !/.ssh</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">   ssh-keygen</span><span style=\"color:#79B8FF\"> -f</span><span style=\"color:#9ECBFF\"> hexo-deploy-key</span><span style=\"color:#79B8FF\"> -C</span><span style=\"color:#9ECBFF\"> 'email'</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">   pbcopy</span><span style=\"color:#F97583\"> &#x3C;</span><span style=\"color:#9ECBFF\"> hexo-deploy-key</span><span style=\"color:#6A737D\"> # 复制创建的私有key</span></span></code></pre>\n</li>\n<li>\n<p>配置Secrets</p>\n<ul>\n<li>\n<p>[ ]  源码仓库Settings -&gt; Secrets -&gt; Actions -&gt; new repository secret添加一个新的 Secret</p>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#85E89D\">     Name</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">HEXO_DEPLOY_PRI</span><span style=\"color:#6A737D\"> # 名称后面要使用</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">     Value</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">xxxx</span><span style=\"color:#6A737D\"> # ~/.ssh/hexo-deploy-key文件中的内容，刚刚已经被复制到剪切板中。</span></span></code></pre>\n</li>\n<li>\n<p>[ ]  静态文件仓库 Settings -&gt; Deploy keys -&gt; add deploy key 页面添加新的 Secret</p>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#B392F0\">     Title:</span><span style=\"color:#9ECBFF\"> hexo-deploy-key</span></span>\n<span class=\"line\"><span style=\"color:#B392F0\">     Key:</span><span style=\"color:#9ECBFF\"> xxxxx</span><span style=\"color:#6A737D\"> # 填入 hexo-deploy-key.pub 中的公钥内容</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">     # 勾选 Allow write access 选项，允许写入权限</span></span></code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p>添加 github action</p>\n<ul>\n<li>\n<p>[ ]  源码仓库创建文件 <code>.github/workflows/hexo-deploy.yml</code>并编辑</p>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#85E89D\">     name</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">Hexo Deploy</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">     # 只监听 source 分支的改动</span></span>\n<span class=\"line\"><span style=\"color:#79B8FF\">     on</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">       push</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">         branches</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">           - </span><span style=\"color:#9ECBFF\">master</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">     # 自定义环境变量，这个GIT_USER和GIT_EMAIL配置成你自己的，</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">     # GIT_EMAIL尽量和上面的`ssh-keygen -f hexo-deploy-key -C \"email\"`中的email保持一致</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">     env</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">       GIT_USER</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">your user name</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">       GIT_EMAIL</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">your email addr</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#85E89D\">     jobs</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">       build-and-deploy</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">         runs-on</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">ubuntu-latest</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#85E89D\">         steps</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">           # 获取博客源码和主题</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">           - </span><span style=\"color:#85E89D\">name</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">Checkout</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">             uses</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">actions/checkout@v2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">           # 这里用的是 Node.js 14.x，16.x 生成 Hexo 静态页面会有问题</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">           - </span><span style=\"color:#85E89D\">name</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">Set up Node.js</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">             uses</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">actions/setup-node@v1</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">             with</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">               node-version</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">'16'</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">           # 安装依赖</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">           - </span><span style=\"color:#85E89D\">name</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">Install Dependencies</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">             run</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#F97583\">|</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">               npm install</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">           # 从之前设置的 secret 获取部署私钥</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">           - </span><span style=\"color:#85E89D\">name</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">Setup SSH Keys and known_hosts</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">             env</span><span style=\"color:#E1E4E8\">:</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">               HEXO_DEPLOY_PRI</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">$&#123;&#123; secrets.HEXO_DEPLOY_PRI &#125;&#125;</span><span style=\"color:#E1E4E8\"> </span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">             run</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#F97583\">|</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">               sudo timedatectl set-timezone \"Asia/Shanghai\"</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">               mkdir -p ~/.ssh</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">               echo \"$HEXO_DEPLOY_PRI\" > ~/.ssh/id_rsa</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">               chmod 600 ~/.ssh/id_rsa</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">               ssh-keyscan github.com >> ~/.ssh/known_hosts</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">               git config --global user.name $GIT_USER</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">               git config --global user.email $GIT_EMAIL</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">           # 生成并部署 `npx hexo clean &#x26;&#x26; npx hexo g -d` or `npm run deploy`</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">           - </span><span style=\"color:#85E89D\">name</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#9ECBFF\">Deploy</span></span>\n<span class=\"line\"><span style=\"color:#85E89D\">             run</span><span style=\"color:#E1E4E8\">: </span><span style=\"color:#F97583\">|</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">               npx hexo clean &#x26;&#x26; npx hexo g &#x26;&#x26; npx hexo deploy</span></span></code></pre>\n</li>\n</ul>\n</li>\n</ol>\n","text":"本文介绍使用 qexo后台管理 hexo博客并自动推送修改到 github仓库，然后由 github action自动部署并发布。由于我的博客分为两个仓库(博客...","permalink":"/post/qexo-hexo","photos":[],"count_time":{"symbolsCount":"3.4k","symbolsTime":"3 mins."},"categories":[{"name":"TOOL","slug":"TOOL","count":11,"path":"api/categories/TOOL.json"}],"tags":[{"name":"qexo","slug":"qexo","count":1,"path":"api/tags/qexo.json"},{"name":"hexo","slug":"hexo","count":1,"path":"api/tags/hexo.json"},{"name":"ci/cd","slug":"ci-cd","count":1,"path":"api/tags/ci-cd.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%87%86%E5%A4%87\"><span class=\"toc-text\">准备</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%83%A8%E7%BD%B2%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Qexo\"><span class=\"toc-text\">部署后台管理工具Qexo</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%83%A8%E7%BD%B2Qexo%E5%88%B0Vercel\"><span class=\"toc-text\">部署Qexo到Vercel</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AEQexo\"><span class=\"toc-text\">配置Qexo</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AEQexo%E5%9B%BE%E5%BA%8A\"><span class=\"toc-text\">配置Qexo图床</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%A3%E7%A0%81%E4%BB%93%E5%BA%93CI-CD\"><span class=\"toc-text\">代码仓库CI&#x2F;CD</span></a></li></ol>","author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"GCM","uid":"17123eb273eb28de4ba456a5c252cb7a","slug":"credential-manager","date":"2023-10-28T15:09:09.608Z","updated":"2026-02-11T06:05:14.085Z","comments":true,"path":"api/articles/credential-manager.json","keywords":null,"cover":"https://s2.loli.net/2023/10/28/28tyr5UZbIVm7wX.png","text":"git凭据管理(git-credential-manager)-多用户 帮助命令 git credential-manager github --help # ...","permalink":"/post/credential-manager","photos":[],"count_time":{"symbolsCount":622,"symbolsTime":"1 mins."},"categories":[{"name":"GIT","slug":"GIT","count":2,"path":"api/categories/GIT.json"}],"tags":[{"name":"git","slug":"git","count":2,"path":"api/tags/git.json"}],"author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"常用CSS","uid":"d471cbb5d3a5e8775b58ce1c8d851097","slug":"css","date":"2023-09-14T03:15:44.609Z","updated":"2024-09-03T03:05:31.835Z","comments":true,"path":"api/articles/css.json","keywords":null,"cover":"https://s2.loli.net/2023/09/14/SqB2imZdaP7gMWX.png","text":"本文主要记录一些常用css，经常用但是还是记不住，每次都要上网搜好麻烦啊所以特此开了本文。本文包括文字，图片，背景，动画，定位，布局，滚动条等样式，以及一些样式...","permalink":"/post/css","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"CSS","slug":"CSS","count":4,"path":"api/categories/CSS.json"}],"tags":[{"name":"css","slug":"css","count":3,"path":"api/tags/css.json"},{"name":"多行文本省略号","slug":"多行文本省略号","count":1,"path":"api/tags/多行文本省略号.json"},{"name":"下划线距离","slug":"下划线距离","count":1,"path":"api/tags/下划线距离.json"},{"name":"图片size","slug":"图片size","count":1,"path":"api/tags/图片size.json"},{"name":"打印样式","slug":"打印样式","count":1,"path":"api/tags/打印样式.json"},{"name":"flex","slug":"flex","count":1,"path":"api/tags/flex.json"},{"name":"grid","slug":"grid","count":1,"path":"api/tags/grid.json"}],"author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}