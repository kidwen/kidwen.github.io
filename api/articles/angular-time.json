{"title":"angular time format","uid":"d270d462daf0496aec69d3ecc94557ef","slug":"angular-time","date":"2023-11-21T09:27:56.038Z","updated":"2024-04-08T11:36:22.721Z","comments":true,"path":"api/articles/angular-time.json","keywords":null,"cover":"https://s2.loli.net/2023/11/21/jRFKdD7oT4yC5kg.png","content":"<p>Angular 拥有强悍的时间格式化管道以及方法，本文主要介绍<code>formatDate</code>方法的使用。</p>\n<h3 id=\"引入\">引入</h3>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#F97583\">import</span><span style=\"color:#E1E4E8\"> &#123; formatDate &#125; </span><span style=\"color:#F97583\">from</span><span style=\"color:#9ECBFF\"> '@angular/common'</span><span style=\"color:#E1E4E8\">;</span></span></code></pre>\n<h3 id=\"参数\">参数</h3>\n<ul>\n<li>\n<p>value: string | number | Date</p>\n<ul>\n<li>可以传入符合规范的时间字符串（<a href=\"https://www.w3.org/TR/NOTE-datetime\">ISO 字符串规范</a>），时间戳（UTC毫秒）或者Date对象，</li>\n</ul>\n</li>\n<li>\n<p>format: string</p>\n<ul>\n<li>格式化的格式，例如 ‘yyyy-MM-dd hh:mm:ss’</li>\n<li>yyyy-MM-dd =&gt; 2023-11-21</li>\n<li>hh:mm:ss =&gt; 17:21:09</li>\n<li>hh:mm:ss a =&gt; 05:21:09 PM</li>\n<li>EEEE =&gt; Tuesday</li>\n<li>EEE =&gt; Tue</li>\n<li>MMMM =&gt; November</li>\n<li>MMM d =&gt; Nov 21</li>\n</ul>\n</li>\n<li>\n<p>locale: string</p>\n<ul>\n<li>设置格式规则的区域设置代码</li>\n<li>‘en-US’</li>\n</ul>\n</li>\n<li>\n<p>timezone?: string</p>\n<ul>\n<li>时区，如果没有设置则使用系统时区</li>\n<li>‘utc’</li>\n<li>‘+8’</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"附录一\">附录一</h3>\n<p>如果遇到给了一个时区<code>America/Los_Angeles</code>,angular是不识别的，需要自己转换。</p>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#F97583\">export</span><span style=\"color:#F97583\"> function</span><span style=\"color:#B392F0\"> getTimeZoneOffset</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#FFAB70\">timeZone</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#F97583\">!</span><span style=\"color:#E1E4E8\">timeZone) &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#9ECBFF\"> 'UTC'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    const</span><span style=\"color:#79B8FF\"> dt</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> DateTime.</span><span style=\"color:#B392F0\">now</span><span style=\"color:#E1E4E8\">().</span><span style=\"color:#B392F0\">setZone</span><span style=\"color:#E1E4E8\">(timeZone);</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">    // 获取时区偏移并格式化为 '+HH:mm' 形式</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    const</span><span style=\"color:#79B8FF\"> timeZoneOffset</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> dt.</span><span style=\"color:#B392F0\">toFormat</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'ZZ'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    return</span><span style=\"color:#E1E4E8\"> timeZoneOffset;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#9ECBFF\">```</span></span></code></pre>\n<h3 id=\"附录二\">附录二</h3>\n<p>angular <code>date</code>管道和方法使用差不多，只是参数顺序不一样（timezone和locale交换）。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>需要注意：改变Date对象并不会触发管道，需要创建新对象才可以。</p></blockquote>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#B392F0\">transform</span><span style=\"color:#E1E4E8\">(value: Date </span><span style=\"color:#F97583\">|</span><span style=\"color:#E1E4E8\"> string </span><span style=\"color:#F97583\">|</span><span style=\"color:#E1E4E8\"> number, format</span><span style=\"color:#F97583\">?:</span><span style=\"color:#E1E4E8\"> string, timezone</span><span style=\"color:#F97583\">?:</span><span style=\"color:#E1E4E8\"> string, locale</span><span style=\"color:#F97583\">?:</span><span style=\"color:#E1E4E8\"> string): string </span><span style=\"color:#F97583\">|</span><span style=\"color:#79B8FF\"> null</span><span style=\"color:#E1E4E8\">;</span></span></code></pre>\n<h3 id=\"附录三\">附录三</h3>\n<table>\n<thead>\n<tr>\n<th>选项</th>\n<th>等价于</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>short</code></td>\n<td><code>M/d/yy, h:mm a</code></td>\n<td><code>6/15/15, 9:03 AM</code></td>\n</tr>\n<tr>\n<td><code>medium</code></td>\n<td><code>MMM d, y, h:mm:ss a</code></td>\n<td><code>Jun 15, 2015, 9:03:01 AM</code></td>\n</tr>\n<tr>\n<td><code>long</code></td>\n<td><code>MMMM d, y, h:mm:ss a z</code></td>\n<td><code>June 15, 2015 at 9:03:01 AM GMT+1</code></td>\n</tr>\n<tr>\n<td><code>full</code></td>\n<td><code>EEEE, MMMM d, y, h:mm:ss a zzzz</code></td>\n<td><code>Monday, June 15, 2015 at 9:03:01 AM GMT+01:00</code></td>\n</tr>\n<tr>\n<td><code>shortDate</code></td>\n<td><code>M/d/yy</code></td>\n<td><code>6/15/15</code></td>\n</tr>\n<tr>\n<td><code>mediumDate</code></td>\n<td><code>MMM d, y</code></td>\n<td><code>Jun 15, 2015</code></td>\n</tr>\n<tr>\n<td><code>longDate</code></td>\n<td><code>MMMM d, y</code></td>\n<td><code>June 15, 2015</code></td>\n</tr>\n<tr>\n<td><code>fullDate</code></td>\n<td><code>EEEE, MMMM d, y</code></td>\n<td><code>Monday, June 15, 2015</code></td>\n</tr>\n<tr>\n<td><code>shortTime</code></td>\n<td><code>h:mm a</code></td>\n<td><code>9:03 AM</code></td>\n</tr>\n<tr>\n<td><code>mediumTime</code></td>\n<td><code>h:mm:ss a</code></td>\n<td><code>9:03:01 AM</code></td>\n</tr>\n<tr>\n<td><code>longTime</code></td>\n<td><code>h:mm:ss a z</code></td>\n<td><code>9:03:01 AM GMT+1</code></td>\n</tr>\n<tr>\n<td><code>fullTime</code></td>\n<td><code>h:mm:ss a zzzz</code></td>\n<td><code>9:03:01 AM GMT+01:00</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"附录四\">附录四</h3>\n<p>夏令时：以美国夏令时为例本地时间会+1，美国时区为-8，所以美国夏令时相对于utc时间是-7.</p>\n<p>js使用<code>new Date()</code>会返回如下结果，此时会给出夏令时时间</p>\n<p><img src=\"https://img.kidwen.top/file/6ee8baf1266fba3188ecf.png\" alt=\"默认\"></p>\n<p>但是当你只有时分秒的utc时间的话通过<code>new Date(time)</code>是不会认为这是一个夏令时时间所以要自己手动转换</p>\n<p><img src=\"https://img.kidwen.top/file/2ad55e7432a6d4776fcb8.png\" alt=\"时分秒\"></p>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#6A737D\">/**</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * 获取当前是否有夏令时时间偏移</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * </span><span style=\"color:#F97583\">@returns</span><span style=\"color:#6A737D\"> number</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> */</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#B392F0\"> getDaylightTime</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#FFAB70\">timeUnix</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> number</span><span style=\"color:#F97583\"> =></span><span style=\"color:#E1E4E8\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    var</span><span style=\"color:#E1E4E8\"> year </span><span style=\"color:#F97583\">=</span><span style=\"color:#F97583\"> new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">(timeUnix).</span><span style=\"color:#B392F0\">getFullYear</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">    // getTimezoneOffset()方法返回的是本地时间与 GMT 时间或 UTC 时间之间相差的分钟数。</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    var</span><span style=\"color:#E1E4E8\"> t1 </span><span style=\"color:#F97583\">=</span><span style=\"color:#F97583\"> new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">(year, </span><span style=\"color:#79B8FF\">0</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#79B8FF\">1</span><span style=\"color:#E1E4E8\">).</span><span style=\"color:#B392F0\">getTimezoneOffset</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    var</span><span style=\"color:#E1E4E8\"> t2 </span><span style=\"color:#F97583\">=</span><span style=\"color:#F97583\"> new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">(timeUnix).</span><span style=\"color:#B392F0\">getTimezoneOffset</span><span style=\"color:#E1E4E8\">();</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">    // 获取夏令时时间偏移</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    return</span><span style=\"color:#E1E4E8\"> t1 </span><span style=\"color:#F97583\">-</span><span style=\"color:#E1E4E8\"> t2;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#125;;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#79B8FF\"> daylightOffset</span><span style=\"color:#F97583\"> =</span><span style=\"color:#B392F0\"> getDaylightTime</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#F97583\">new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">());</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">const</span><span style=\"color:#B392F0\"> getTimezoneOffsetTime</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#FFAB70\">timeNumber</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> number</span><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> number</span><span style=\"color:#F97583\"> =></span><span style=\"color:#E1E4E8\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (daylightOffset </span><span style=\"color:#F97583\">!==</span><span style=\"color:#79B8FF\"> 0</span><span style=\"color:#E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#E1E4E8\"> timeNumber </span><span style=\"color:#F97583\">+</span><span style=\"color:#E1E4E8\"> daylightOffset </span><span style=\"color:#F97583\">*</span><span style=\"color:#79B8FF\"> 60</span><span style=\"color:#F97583\"> *</span><span style=\"color:#79B8FF\"> 1000</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#125; </span><span style=\"color:#F97583\">else</span><span style=\"color:#E1E4E8\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#E1E4E8\"> timeNumber;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">/**</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * 获取转换 UTC 时间为当前时间</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * </span><span style=\"color:#F97583\">@param</span><span style=\"color:#E1E4E8\"> utcTime</span><span style=\"color:#6A737D\"> number</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * </span><span style=\"color:#F97583\">@param</span><span style=\"color:#E1E4E8\"> type</span><span style=\"color:#6A737D\"> TimeType</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * </span><span style=\"color:#F97583\">@returns</span><span style=\"color:#6A737D\"> number</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> */</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">export</span><span style=\"color:#F97583\"> const</span><span style=\"color:#B392F0\"> getConvertUtcToCurrentTime</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#FFAB70\">utcTime</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> number</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">type</span><span style=\"color:#F97583\">?:</span><span style=\"color:#B392F0\"> TimeType</span><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> number</span><span style=\"color:#F97583\"> =></span><span style=\"color:#E1E4E8\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">    // 传 UTC 时间时，假如只传 28800000 (8:00) 减去时区会得到 28800000 - 28800000 = 0</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (type </span><span style=\"color:#F97583\">===</span><span style=\"color:#9ECBFF\"> 'HH:mm'</span><span style=\"color:#E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">        // 因为有夏令时，所以在格式化之前加上夏令时偏移</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        const</span><span style=\"color:#79B8FF\"> utcTimeStr</span><span style=\"color:#F97583\"> =</span><span style=\"color:#B392F0\"> formatDate</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#B392F0\">getTimezoneOffsetTime</span><span style=\"color:#E1E4E8\">(utcTime), </span><span style=\"color:#9ECBFF\">'HH:mm'</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#9ECBFF\">'en-US'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">        // 1970年 7:30会出现负值，导致时间提交失败</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#E1E4E8\"> (Date.</span><span style=\"color:#B392F0\">parse</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'2000-01-01T'</span><span style=\"color:#F97583\"> +</span><span style=\"color:#E1E4E8\"> utcTimeStr </span><span style=\"color:#F97583\">+</span><span style=\"color:#9ECBFF\"> ':00'</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">+</span><span style=\"color:#F97583\"> new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">().</span><span style=\"color:#B392F0\">getTimezoneOffset</span><span style=\"color:#E1E4E8\">() </span><span style=\"color:#F97583\">*</span><span style=\"color:#79B8FF\"> 60000</span><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    return</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#F97583\">new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">(utcTime).</span><span style=\"color:#B392F0\">getTime</span><span style=\"color:#E1E4E8\">() </span><span style=\"color:#F97583\">+</span><span style=\"color:#F97583\"> new</span><span style=\"color:#B392F0\"> Date</span><span style=\"color:#E1E4E8\">().</span><span style=\"color:#B392F0\">getTimezoneOffset</span><span style=\"color:#E1E4E8\">() </span><span style=\"color:#F97583\">*</span><span style=\"color:#79B8FF\"> 60000</span><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#F97583\">export</span><span style=\"color:#F97583\"> type</span><span style=\"color:#B392F0\"> TimeType</span><span style=\"color:#F97583\"> =</span><span style=\"color:#9ECBFF\"> 'HH:mm'</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">/**</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * 获取转换字符串日期为当前时间</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * </span><span style=\"color:#F97583\">@param</span><span style=\"color:#E1E4E8\"> time</span><span style=\"color:#6A737D\"> string</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * </span><span style=\"color:#F97583\">@param</span><span style=\"color:#E1E4E8\"> type</span><span style=\"color:#6A737D\"> TimeType</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * </span><span style=\"color:#F97583\">@returns</span><span style=\"color:#6A737D\"> number</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> */</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">export</span><span style=\"color:#F97583\"> const</span><span style=\"color:#B392F0\"> getConvertStringTimeToCurrentTime</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#FFAB70\">time</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">type</span><span style=\"color:#F97583\">:</span><span style=\"color:#B392F0\"> TimeType</span><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> number</span><span style=\"color:#F97583\"> =></span><span style=\"color:#E1E4E8\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (type </span><span style=\"color:#F97583\">===</span><span style=\"color:#9ECBFF\"> 'HH:mm'</span><span style=\"color:#E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">        // 1970年 7:30会出现负值，导致时间提交失败</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#E1E4E8\"> Date.</span><span style=\"color:#B392F0\">parse</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'2000-01-01T'</span><span style=\"color:#F97583\"> +</span><span style=\"color:#E1E4E8\"> time </span><span style=\"color:#F97583\">+</span><span style=\"color:#9ECBFF\"> ':00'</span><span style=\"color:#E1E4E8\">);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#6A737D\">/**</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * 获取当前时间</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * </span><span style=\"color:#F97583\">@param</span><span style=\"color:#E1E4E8\"> time</span><span style=\"color:#6A737D\"> string | number </span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * </span><span style=\"color:#F97583\">@param</span><span style=\"color:#E1E4E8\"> type</span><span style=\"color:#6A737D\"> TimeType</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> * </span><span style=\"color:#F97583\">@returns</span><span style=\"color:#6A737D\"> number | null</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\"> */</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">export</span><span style=\"color:#F97583\"> const</span><span style=\"color:#B392F0\"> getCurrentTime</span><span style=\"color:#F97583\"> =</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#FFAB70\">time</span><span style=\"color:#F97583\">?:</span><span style=\"color:#79B8FF\"> string</span><span style=\"color:#F97583\"> |</span><span style=\"color:#79B8FF\"> number</span><span style=\"color:#E1E4E8\">, </span><span style=\"color:#FFAB70\">type</span><span style=\"color:#F97583\">?:</span><span style=\"color:#B392F0\"> TimeType</span><span style=\"color:#E1E4E8\">)</span><span style=\"color:#F97583\">:</span><span style=\"color:#79B8FF\"> number</span><span style=\"color:#F97583\"> |</span><span style=\"color:#79B8FF\"> null</span><span style=\"color:#F97583\"> =></span><span style=\"color:#E1E4E8\"> &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (time </span><span style=\"color:#F97583\">===</span><span style=\"color:#79B8FF\"> undefined</span><span style=\"color:#F97583\"> ||</span><span style=\"color:#E1E4E8\"> time </span><span style=\"color:#F97583\">===</span><span style=\"color:#79B8FF\"> null</span><span style=\"color:#E1E4E8\">) </span><span style=\"color:#F97583\">return</span><span style=\"color:#79B8FF\"> null</span><span style=\"color:#E1E4E8\">;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    if</span><span style=\"color:#E1E4E8\"> (</span><span style=\"color:#F97583\">typeof</span><span style=\"color:#E1E4E8\"> time </span><span style=\"color:#F97583\">===</span><span style=\"color:#9ECBFF\"> 'string'</span><span style=\"color:#E1E4E8\">) &#123;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">        return</span><span style=\"color:#B392F0\"> getConvertStringTimeToCurrentTime</span><span style=\"color:#E1E4E8\">(time, type);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">    &#125;</span></span>\n<span class=\"line\"><span style=\"color:#F97583\">    return</span><span style=\"color:#B392F0\"> getConvertUtcToCurrentTime</span><span style=\"color:#E1E4E8\">(time, type);</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">&#125;</span></span></code></pre>\n<h3 id=\"附录五-moment-timezone\">附录五 - moment-timezone</h3>\n<pre class=\"shiki github-dark\" style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#6A737D\">// 获取指定时区的时间偏移量</span></span>\n<span class=\"line\"><span style=\"color:#E1E4E8\">moment.</span><span style=\"color:#B392F0\">tz</span><span style=\"color:#E1E4E8\">(</span><span style=\"color:#9ECBFF\">'America/Los_Angeles'</span><span style=\"color:#E1E4E8\">).</span><span style=\"color:#B392F0\">utcOffset</span><span style=\"color:#E1E4E8\">() </span><span style=\"color:#F97583\">*</span><span style=\"color:#79B8FF\"> 60</span><span style=\"color:#F97583\"> *</span><span style=\"color:#79B8FF\"> 1000</span><span style=\"color:#E1E4E8\">;</span></span></code></pre>\n","text":"Angular 拥有强悍的时间格式化管道以及方法，本文主要介绍formatDate方法的使用。 引入 import { formatDate } from '@...","permalink":"/post/angular-time","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[{"name":"ANGULAR","slug":"ANGULAR","count":8,"path":"api/categories/ANGULAR.json"}],"tags":[{"name":"angular","slug":"angular","count":5,"path":"api/tags/angular.json"},{"name":"time format","slug":"time-format","count":1,"path":"api/tags/time-format.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%95%E5%85%A5\"><span class=\"toc-text\">引入</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">参数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%84%E5%BD%95%E4%B8%80\"><span class=\"toc-text\">附录一</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%84%E5%BD%95%E4%BA%8C\"><span class=\"toc-text\">附录二</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%84%E5%BD%95%E4%B8%89\"><span class=\"toc-text\">附录三</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%84%E5%BD%95%E5%9B%9B\"><span class=\"toc-text\">附录四</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%99%84%E5%BD%95%E4%BA%94-moment-timezone\"><span class=\"toc-text\">附录五 - moment-timezone</span></a></li></ol>","author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"使用Nuxt和Supabase做一个书签管理器","uid":"9957a2da37115597aba3967fbfc7d5d1","slug":"bookmark","date":"2024-04-13T14:35:01.997Z","updated":"2024-04-16T09:57:08.716Z","comments":true,"path":"api/articles/bookmark.json","keywords":null,"cover":"https://img.kidwen.top/file/55837b5c7b13f1a14923d.png","text":"这几天发现书签太多了并且不是很好找到想要的书签，所以我决定利用空闲时间写一个书签管理器。正好趁这个机会用一下基于vue的nuxt 3框架。数据库选择了免费的su...","permalink":"/post/bookmark","photos":[],"count_time":{"symbolsCount":976,"symbolsTime":"1 mins."},"categories":[{"name":"NUXT","slug":"NUXT","count":1,"path":"api/categories/NUXT.json"}],"tags":[{"name":"nuxt","slug":"nuxt","count":1,"path":"api/tags/nuxt.json"},{"name":"pina","slug":"pina","count":1,"path":"api/tags/pina.json"},{"name":"supabase","slug":"supabase","count":1,"path":"api/tags/supabase.json"},{"name":"vercel","slug":"vercel","count":1,"path":"api/tags/vercel.json"},{"name":"oauth","slug":"oauth","count":1,"path":"api/tags/oauth.json"}],"author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"GCM","uid":"17123eb273eb28de4ba456a5c252cb7a","slug":"credential-manager","date":"2023-10-28T15:09:09.608Z","updated":"2026-02-11T06:05:14.085Z","comments":true,"path":"api/articles/credential-manager.json","keywords":null,"cover":"https://s2.loli.net/2023/10/28/28tyr5UZbIVm7wX.png","text":"git凭据管理(git-credential-manager)-多用户 帮助命令 git credential-manager github --help # ...","permalink":"/post/credential-manager","photos":[],"count_time":{"symbolsCount":622,"symbolsTime":"1 mins."},"categories":[{"name":"GIT","slug":"GIT","count":2,"path":"api/categories/GIT.json"}],"tags":[{"name":"git","slug":"git","count":2,"path":"api/tags/git.json"}],"author":{"name":"Kidwen","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/38277891?v=4","link":"/","description":"Frontend","socials":{"github":"https://github.com/kidwen","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}