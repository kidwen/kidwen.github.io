{"title":"","uid":"1cd19fc71517798e2fa5b7457d1fb06e","text":" üêç body { --white: #aaa; --black: #000; background: var(--black); height: 100vh; width: 100vw; min-width: 640px; min-height: 640px; display:...","date":"2023-08-08T06:12:33.781Z","updated":"2023-08-08T06:12:33.781Z","comments":true,"path":"api/pages/snake/index.html","covers":null,"excerpt":"","content":"<!DOCTYPE html>\n<html lang='en'>\n\n<head>\n    <meta charset='UTF-8' />\n    <meta name='viewport' content='width=device-width, initial-scale=1.0' />\n    <title>üêç</title>\n    <style>\n        body {\n            --white: #aaa;\n            --black: #000;\n            background: var(--black);\n            height: 100vh;\n            width: 100vw;\n            min-width: 640px;\n            min-height: 640px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            overflow: hidden;\n        }\n\n        #wrap {\n            width: 600px;\n            height: 600px;\n            border: 1px solid var(--white);\n            border-bottom: none;\n            border-right: none;\n            display: flex;\n            flex-wrap: wrap;\n            position: relative;\n        }\n\n        .table-item {\n            border-bottom: 1px solid var(--white);\n            border-right: 1px solid var(--white);\n            width: 9px;\n            height: 9px;\n        }\n\n        .snake-item,\n        .food-item {\n            width: 9px;\n            height: 9px;\n            background-color: var(--white);\n            position: absolute;\n        }\n\n        .food-item.fade,\n        .snake-item.fade {\n            animation: fade 400ms infinite;\n        }\n\n        @keyframes fade {\n            from {\n                opacity: 1;\n            }\n\n            50% {\n                opacity: 0.5;\n            }\n\n            to {\n                opacity: 1;\n            }\n        }\n    </style>\n</head>\n\n<body>\n    <div id='wrap'></div>\n    <script>\n        const snake = {\n            data: [\n                {\n                    x: 10,\n                    y: 0,\n                },\n                {\n                    x: 9,\n                    y: 0,\n                },\n                {\n                    x: 8,\n                    y: 0,\n                },\n                {\n                    x: 7,\n                    y: 0,\n                },\n                {\n                    x: 6,\n                    y: 0,\n                },\n                {\n                    x: 5,\n                    y: 0,\n                },\n                {\n                    x: 4,\n                    y: 0,\n                },\n                {\n                    x: 3,\n                    y: 0,\n                },\n                {\n                    x: 2,\n                    y: 0,\n                },\n                {\n                    x: 1,\n                    y: 0,\n                },\n                {\n                    x: 0,\n                    y: 0,\n                },\n            ],\n            food: [],\n            direction: 'right',\n            timer: undefined,\n            moveTimeout: 50,\n            removeFoodTimeout: 3000,\n            gameOver: false,\n            resetSake: function ()\n            {\n                this.removeFoodTimer && clearInterval(this.removeFoodTimer);\n                this.timer && clearInterval(this.timer);\n                this.removeAllFood();\n                for (let index = 0; index < this.data.length; index++) {\n                    const item = this.data[index];\n                    item.dom.remove();\n                }\n                this.data = [\n                    {\n                        x: 10,\n                        y: 0,\n                    },\n                    {\n                        x: 9,\n                        y: 0,\n                    },\n                    {\n                        x: 8,\n                        y: 0,\n                    },\n                    {\n                        x: 7,\n                        y: 0,\n                    },\n                    {\n                        x: 6,\n                        y: 0,\n                    },\n                    {\n                        x: 5,\n                        y: 0,\n                    },\n                    {\n                        x: 4,\n                        y: 0,\n                    },\n                    {\n                        x: 3,\n                        y: 0,\n                    },\n                    {\n                        x: 2,\n                        y: 0,\n                    },\n                    {\n                        x: 1,\n                        y: 0,\n                    },\n                    {\n                        x: 0,\n                        y: 0,\n                    },\n                ];\n                this.timer && clearInterval(this.timer);\n            },\n            createElement: function (className, position)\n            {\n                const ele = document.createElement('div');\n                ele.setAttribute('class', className);\n                ele.style = `left: ${position.x}px;top: ${position.y}px;`;\n                wrap.appendChild(ele);\n                return ele;\n            },\n            init: function ()\n            {\n                this.gameOver = false;\n                this.direction = 'right';\n                for (let index = 0; index < this.data.length; index++) {\n                    const item = this.createElement('snake-item', { x: this.data[index].x * 10, y: this.data[index].y * 10 });\n                    this.data[index].dom = item;\n                }\n                this.start();\n            },\n            start: function ()\n            {\n                this.timer && clearInterval(this.timer);\n                this.timer = setInterval(() =>\n                {\n                    this.move();\n                }, this.moveTimeout);\n                this.randomFood();\n                this.removeFood();\n            },\n            randomFood: function ()\n            {\n                const x = parseInt(Math.random() * 59 + 0);\n                const y = parseInt(Math.random() * 59 + 0);\n                if (this.isCollide({ x, y }) || this.isEated({ x, y })) {\n                    this.randomFood();\n                    return;\n                }\n                const dom = this.createElement('food-item', { x: x * 10, y: y * 10 });\n                this.food.push({ x, y, dom });\n            },\n            removeAllFood: function ()\n            {\n                for (let index = 0; index < this.food.length; index++) {\n                    const item = this.food[index];\n                    item.dom.remove();\n                }\n            },\n            removeFood: function ()\n            {\n                this.removeFoodTimer && clearInterval(this.removeFoodTimer);\n                this.removeFoodTimer = setInterval(() =>\n                {\n                    if (this.food.length > 0) {\n                        this.food[0].dom.classList.add('fade');\n                        setTimeout(() =>\n                        {\n                            this.food[0].dom.remove();\n                            this.food.shift();\n                            if (this.food.length === 0) {\n                                this.randomFood();\n                            }\n                        }, 2000);\n                    }\n                }, this.removeFoodTimeout);\n            },\n            move: function ()\n            {\n                let x, y;\n                if (this.direction === 'right') {\n                    x = this.data[0].x + 1;\n                    y = this.data[0].y;\n                }\n                if (this.direction === 'left') {\n                    x = this.data[0].x - 1;\n                    y = this.data[0].y;\n                }\n                if (this.direction === 'top') {\n                    x = this.data[0].x;\n                    y = this.data[0].y - 1;\n                }\n                if (this.direction === 'bottom') {\n                    x = this.data[0].x;\n                    y = this.data[0].y + 1;\n                }\n                if (this.isEated({ x, y })) {\n                    const index = this.food.findIndex(item => item.x === x && item.y === y);\n                    if (index !== -1) {\n                        this.food[index].dom.remove();\n                        this.randomFood();\n                    }\n                    const item = this.createElement('snake-item', { x: x * 10, y: y * 10 });\n                    this.data.unshift({ x, y, dom: item });\n                } else {\n                    const last = this.data.pop();\n                    last.x = x;\n                    last.y = y;\n                    // if (this.isCollide(last)) {\n                    //     this.gameOver = true;\n                    //     return;\n                    // }\n                    if (!this.checkLive(last)) {\n                        this.data.unshift(last);\n                        this.resetSake();\n                        this.gameOver = true;\n                        return;\n                    }\n                    this.data.unshift(last);\n                    this.setDomStyle(last);\n                }\n\n            },\n            setDomStyle: function (item)\n            {\n                item.dom.style = `left: ${item.x * 10}px;top: ${item.y * 10}px;`;\n            },\n            checkLive: function (nextLastItem)\n            {\n                if (\n                    this.data[0].x === 59 ||\n                    this.data[0].y === 59 ||\n                    this.data[0].x < 0 ||\n                    this.data[0].y < 0\n                ) {\n                    return false;\n                }\n                if (this.isCollide(nextLastItem)) {\n                    return false;\n                }\n                return true;\n            },\n            isCollide: function ({ x, y })\n            {\n                return !!this.data.some((item) => item.x === x && item.y === y);\n            },\n            isEated: function ({ x, y })\n            {\n                return !!this.food.some((item) => item.x === x && item.y === y);\n            },\n        };\n        (function initBackground()\n        {\n            for (let index = 0; index < 60 * 60; index++) {\n                const item = document.createElement('div');\n                item.setAttribute('class', 'table-item');\n                wrap.appendChild(item);\n            }\n        })();\n        (function initSnake()\n        {\n            snake.init();\n        })();\n        window.onkeydown = function (e)\n        {\n            if (e.key) {\n                if (e.key === 'ArrowDown' && snake.direction !== 'top') {\n                    snake.direction = 'bottom';\n                }\n                if (e.key === 'ArrowUp' && snake.direction !== 'bottom') {\n                    snake.direction = 'top';\n                }\n                if (e.key === 'ArrowLeft' && snake.direction !== 'right') {\n                    snake.direction = 'left';\n                }\n                if (e.key === 'ArrowRight' && snake.direction !== 'left') {\n                    snake.direction = 'right';\n                }\n                // snake.move();\n                if (snake.gameOver) {\n                    snake.init();\n                }\n            }\n        };\n    </script>\n</body>\n\n</html>\n","count_time":{"symbolsCount":"6.6k","symbolsTime":"6 mins."},"toc":""}